# Base golangci-lint configuration for all Go projects
# This configuration contains common linters that should be used across all projects

linters:
  enable:
    # Correctness - critical bugs and issues
    - govet           # Official Go static analyzer
    - errcheck        # Checks for unchecked errors
    - staticcheck     # Advanced static analysis
    
    # Code quality - maintainability
    - unused          # Finds unused code
    - gosimple        # Suggests code simplifications
    - ineffassign     # Detects ineffectual assignments
    - gofmt           # Code formatting
    - goimports       # Import organization
    
    # Best practices - Go idioms
    - errname         # Error types should end with Error
    - errorlint       # Proper use of errors.Is/As
    - nilnil          # Disallows returning (nil, nil)
    - nilerr          # Finds bugs with nil errors
    
    # Performance - efficiency
    - prealloc        # Recommends pre-allocating slices
    - bodyclose       # Checks HTTP response.Body is closed
    
    # Security - potential vulnerabilities
    - gosec           # Security checker
    
    # Style - code consistency
    - revive          # Fast, configurable linter
    - stylecheck      # Enforces Go style guide

linters-settings:
  errcheck:
    check-blank: true
    check-type-assertions: true
    
  govet:
    enable-all: true
    disable:
      - fieldalignment  # Too strict for most projects
    
  revive:
    rules:
      - name: var-naming
        severity: warning
      - name: context-as-argument
        severity: warning
      - name: error-return
        severity: warning
      - name: error-strings
        severity: warning
      - name: error-naming
        severity: warning
  
  gosec:
    excludes:
      - G104  # Let errcheck handle this
  
  stylecheck:
    checks: ["all", "-ST1000", "-ST1003"]

issues:
  # Common exclusions for all projects
  exclude-rules:
    # Less strict for test files
    - path: _test\.go
      linters:
        - errcheck
        - gosec
        - revive
    
    # Ignore generated files
    - path: ".*\\.gen\\.go$"
      linters:
        - all
    
    # Ignore vendor
    - path: vendor/
      linters:
        - all
  
  # Common directories to exclude
  exclude-dirs:
    - vendor
    - testdata
    - bin
    - mocks
  
  # Common files to exclude
  exclude-files:
    - ".*\\.gen\\.go$"
  
  # Don't hide new issues in existing code
  new: false
  
  # No limits on issues
  max-issues-per-linter: 0
  max-same-issues: 0

run:
  timeout: 5m
  tests: true
  concurrency: 4
